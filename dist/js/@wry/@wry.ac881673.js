const{toString:t,hasOwnProperty:e}=Object.prototype,r=Function.prototype.toString,n=new Map;function a(t,e){try{return s(t,e)}finally{n.clear()}}function s(n,a){if(n===a)return!0;const c=t.call(n);if(c!==t.call(a))return!1;switch(c){case"[object Array]":if(n.length!==a.length)return!1;case"[object Object]":{if(l(n,a))return!0;const t=o(n),r=o(a),c=t.length;if(c!==r.length)return!1;for(let n=0;n<c;++n)if(!e.call(a,t[n]))return!1;for(let e=0;e<c;++e){const r=t[e];if(!s(n[r],a[r]))return!1}return!0}case"[object Error]":return n.name===a.name&&n.message===a.message;case"[object Number]":if(n!=n)return a!=a;case"[object Boolean]":case"[object Date]":return+n==+a;case"[object RegExp]":case"[object String]":return n==`${a}`;case"[object Map]":case"[object Set]":{if(n.size!==a.size)return!1;if(l(n,a))return!0;const t=n.entries(),e="[object Map]"===c;for(;;){const r=t.next();if(r.done)break;const[n,o]=r.value;if(!a.has(n))return!1;if(e&&!s(o,a.get(n)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":n=new Uint8Array(n),a=new Uint8Array(a);case"[object DataView]":{let t=n.byteLength;if(t===a.byteLength)for(;t--&&n[t]===a[t];);return-1===t}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{const t=r.call(n);return t===r.call(a)&&!function(t,e){const r=t.length-e.length;return r>=0&&t.indexOf(e,r)===r}(t,i)}}return!1}function o(t){return Object.keys(t).filter(c,t)}function c(t){return void 0!==this[t]}const i="{ [native code] }";function l(t,e){let r=n.get(t);if(r){if(r.has(e))return!0}else n.set(t,r=new Set);return r.add(e),!1}let u=null;const f={};let h=1;function y(t){try{return t()}catch(e){}}const b="@wry/context:Slot",p=y((()=>globalThis))||y((()=>global))||Object.create(null),j=p[b]||Array[b]||function(t){try{Object.defineProperty(p,b,{value:t,enumerable:!1,writable:!1,configurable:!0})}finally{return t}}(class{constructor(){this.id=["slot",h++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let t=u;t;t=t.parent)if(this.id in t.slots){const e=t.slots[this.id];if(e===f)break;return t!==u&&(u.slots[this.id]=e),!0}return u&&(u.slots[this.id]=f),!1}getValue(){if(this.hasValue())return u.slots[this.id]}withValue(t,e,r,n){const a={__proto__:null,[this.id]:t},s=u;u={parent:s,slots:a};try{return e.apply(n,r)}finally{u=s}}static bind(t){const e=u;return function(){const r=u;try{return u=e,t.apply(this,arguments)}finally{u=r}}}static noContext(t,e,r){if(!u)return t.apply(r,e);{const n=u;try{return u=null,t.apply(r,e)}finally{u=n}}}}),g=()=>Object.create(null),{forEach:w,slice:d}=Array.prototype,{hasOwnProperty:k}=Object.prototype;class A{constructor(t=!0,e=g){this.weakness=t,this.makeData=e}lookup(...t){return this.lookupArray(t)}lookupArray(t){let e=this;return w.call(t,(t=>e=e.getChildTrie(t))),k.call(e,"data")?e.data:e.data=this.makeData(d.call(t))}peek(...t){return this.peekArray(t)}peekArray(t){let e=this;for(let r=0,n=t.length;e&&r<n;++r){const n=this.weakness&&m(t[r])?e.weak:e.strong;e=n&&n.get(t[r])}return e&&e.data}getChildTrie(t){const e=this.weakness&&m(t)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map);let r=e.get(t);return r||e.set(t,r=new A(this.weakness,this.makeData)),r}}function m(t){switch(typeof t){case"object":if(null===t)break;case"function":return!0}return!1}export{j as S,A as T,a as e};
