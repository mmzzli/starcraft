import{F as a}from"../vant/vant.819e26c8.js";import{_ as s}from"../HeaderTitle/HeaderTitle.41d7b1f9.js";import{i as t}from"../img24/img24.ed6b89f9.js";import{i as e,a as l}from"../index.e8014629.js";import{u as o}from"../vuex/vuex.adf06551.js";import{h as i,t as r,u as c,c as n,e as u,g as p}from"../starcraft-sdk/starcraft-sdk.b9fffec7.js";import{F as m}from"../config/config.dfdc56f9.js";import{u as v,a as d}from"../vue-router/vue-router.6a5eb8ba.js";import{k as h,c as w,r as g,w as b,e as f,A as j,j as T,M as y,u as k,B as $,O as S,N as F,x as C,F as U,g as L,C as I,Q as x,R as A}from"../@vue/@vue.f0ed93ab.js";import{_ as P}from"../vue-count-to/vue-count-to.7851cffd.js";import"../@vant/@vant.0d6b19bc.js";import"../img32/img32.2d4b9acf.js";import"../vuex-persistedstate/vuex-persistedstate.6394a064.js";import"../axios/axios.a8ee11a1.js";import"../starcraft-core/starcraft-core.a7e8a7b2.js";import"../@ethersproject/@ethersproject.82fce948.js";import"../bn.js/bn.js.022a57fe.js";import"../aes-js/aes-js.52245d71.js";import"../hash.js/hash.js.951de082.js";import"../minimalistic-assert/minimalistic-assert.62310433.js";import"../inherits/inherits.e883a70c.js";import"../bech32/bech32.0c6cc0e9.js";import"../js-sha3/js-sha3.ce966f76.js";import"../ethers/ethers.7357afd8.js";import"../@apollo/@apollo.167459d8.js";import"../tslib/tslib.cdb03bbf.js";import"../optimism/optimism.dbbdffb5.js";import"../@wry/@wry.ac881673.js";import"../ts-invariant/ts-invariant.73996d61.js";import"../graphql/graphql.c449efb6.js";import"../zen-observable-ts/zen-observable-ts.11549e90.js";import"../symbol-observable/symbol-observable.efed2817.js";import"../graphql-tag/graphql-tag.47c56ce3.js";const B=""+new URL("../../png/img21.945f62f6.png",import.meta.url).href,_=""+new URL("../../png/img22.77f4b76e.png",import.meta.url).href,V=a=>(x("data-v-ae0d233f"),a=a(),A(),a),W={class:"container"},E={class:"container2"},q={class:"fuelbox"},R={key:0,class:"burners"},z={class:"pic"},M=["src"],N={class:"info"},D=V((()=>y("p",null,"Burners",-1))),H=V((()=>y("p",null,"Fuel description: It is used for daily pledge mining consumption, which can be purchased with SCT",-1))),O={key:1,class:"burners"},G={class:"pic"},Q=["src"],J={class:"info"},K=V((()=>y("p",null,"Advanced Burners",-1))),X=V((()=>y("p",null,"Fuel description: Advanced Boosters restore equipment durability and can be purchased with FILWT",-1))),Y={class:"tabs_content"},Z={class:"tabs"},aa=["src"],sa=["src"],ta={class:"custom_stepper"},ea=["src"],la=["src"],oa={class:"text"},ia={class:"custom_stepper"},ra=["src"],ca=["src"],na={class:"text"},ua=P(h({__name:"Fuel",setup(h){const{proxy:x}=L(),A=o();v();const P=d(),V=w((()=>A.state.walletAccount)),ua=g(1),pa=g(1),ma=g(0),va=g(0),da=g(0),ha=g(!0),wa=g(0),ga=g(0),ba=g(0),fa=g(0),ja=g(!0),Ta=g(!0);g(0),g(!0),b([pa,ma,wa],(([a,s,t])=>{va.value=a*s,ga.value=a*t}),{immediate:!0}),f((()=>{ka(),ya(P.params.type),V.value&&($a(),Sa(),Fa())}));const ya=a=>{ua.value=a,pa.value=1},ka=()=>{i().goodsPrice(r().FUEL).then((a=>{ma.value=x.$utils.utilFormat(c.formatEther(a))})).catch((a=>{})),i().goodsPrice(r().ADFUEL).then((a=>{wa.value=x.$utils.utilFormat(c.formatEther(a))})).catch((a=>{}))},$a=async()=>{da.value=await x.$walletUtils.getBalance(r().SCT),ha.value=await x.$walletUtils.checkApprove(r().SCT,n().Shop,da.value)},Sa=async()=>{ba.value=await x.$walletUtils.getBalance(r().FILW),ja.value=await x.$walletUtils.checkApprove(r().FILW,n().Shop,ba.value)},Fa=async()=>{fa.value=await x.$walletUtils.getBalance(m),Ta.value=await x.$walletUtils.checkApprove(m,n().Shop,fa.value)},Ca=async()=>{x.$showLoadingToast({});try{const a=await u(r().SCT).connect(p()).approve(n().Shop,c.parseUnits(1e10.toString()));await a.wait(),$a(),x.$showSuccessToast()}catch(a){x.$closeToast()}},Ua=async()=>{x.$showLoadingToast({});try{const a=await u(m).connect(p()).approve(n().Shop,c.parseUnits(1e10.toString()));await a.wait(),Fa(),x.$showSuccessToast()}catch(a){x.$closeToast()}},La=async()=>{if(!V.value)return x.$showToast("Please connect wallet");if(!pa.value)return x.$showToast("Please fill out");if(va.value>da.value)return x.$showToast("Insufficient balance");x.$showLoadingToast({});try{const a=await i().connect(p()).buy(r().FUEL,c.parseUnits(pa.value.toString()));await a.wait(),x.$showSuccessToast(),setTimeout((()=>{location.reload()}),1e3)}catch(a){x.$closeToast()}},Ia=async()=>{if(!V.value)return x.$showToast("Please connect wallet");if(!pa.value)return x.$showToast("Please fill out");if(ga.value>fa.value)return x.$showToast("Insufficient balance");x.$showLoadingToast({});try{const a=await i().connect(p()).buy(r().ADFUEL,c.parseUnits(pa.value.toString()));await a.wait(),x.$showSuccessToast(),setTimeout((()=>{location.reload()}),1e3)}catch(a){x.$closeToast()}},xa=()=>{pa.value>1&&(pa.value-=1)},Aa=()=>{pa.value+=1},Pa=a=>{const s=parseInt(a.target.value,10);!isNaN(s)&&s>=0&&(pa.value=s)};return(o,i)=>{const r=s,c=a;return I(),j("section",W,[T(r,{headTitle:"Get Fuel"}),y("div",E,[y("div",q,[1==ua.value?(I(),j("div",R,[y("div",z,[y("img",{src:k(e),alt:""},null,8,M)]),y("div",N,[D,H,y("p",null,"Price: "+$(ma.value)+" SCT",1)])])):S("",!0),2==ua.value?(I(),j("div",O,[y("div",G,[y("img",{src:k(l),alt:""},null,8,Q)]),y("div",J,[K,X,y("p",null,"Price: "+$(wa.value)+" FILWT",1)])])):S("",!0)]),y("div",Y,[y("div",Z,[y("div",{class:F({active:1==ua.value}),onClick:i[0]||(i[0]=a=>ya(1))},[C(" Burners "),2==ua.value?(I(),j("img",{key:0,class:"img1",src:k(t),alt:""},null,8,aa)):S("",!0)],2),y("div",{class:F({active:2==ua.value}),onClick:i[1]||(i[1]=a=>ya(2))},[C(" Advanced Burners "),1==ua.value?(I(),j("img",{key:0,class:"img2",src:k(t),alt:""},null,8,sa)):S("",!0)],2)]),1==ua.value?(I(),j(U,{key:0},[y("div",ta,[y("button",{class:F(["minus",{disabled:pa.value<=1}]),onClick:xa},[y("img",{src:k(B),alt:""},null,8,ea)],2),T(c,{modelValue:pa.value,"onUpdate:modelValue":i[2]||(i[2]=a=>pa.value=a),modelModifiers:{number:!0},type:"digit",onInput:Pa},null,8,["modelValue"]),y("button",{class:"plus",onClick:Aa},[y("img",{src:k(_),alt:""},null,8,la)])]),y("p",oa,"Total price: "+$(va.value)+" SCT",1),ha.value?(I(),j("button",{key:0,class:"btn",onClick:La},"Purchase with SCT")):(I(),j("button",{key:1,class:"btn",onClick:Ca},"Approve SCT"))],64)):(I(),j(U,{key:1},[y("div",ia,[y("button",{class:F(["minus",{disabled:pa.value<=1}]),onClick:xa},[y("img",{src:k(B),alt:""},null,8,ra)],2),T(c,{modelValue:pa.value,"onUpdate:modelValue":i[3]||(i[3]=a=>pa.value=a),modelModifiers:{number:!0},type:"digit",onInput:Pa},null,8,["modelValue"]),y("button",{class:"plus",onClick:Aa},[y("img",{src:k(_),alt:""},null,8,ca)])]),y("p",na,"Total price: "+$(ga.value)+" FILWT",1),Ta.value?(I(),j("button",{key:0,class:"btn",onClick:Ia},"Purchase with FILWT")):(I(),j("button",{key:1,class:"btn",onClick:Ua},"Approve FILWT"))],64))])])])}}}),[["__scopeId","data-v-ae0d233f"]]);export{ua as default};
