import{_ as s}from"../HeaderTitle/HeaderTitle.41d7b1f9.js";import{i as a}from"../img23/img23.ed3afe21.js";import{i as t}from"../img24/img24.ed6b89f9.js";import{u as e}from"../vuex/vuex.adf06551.js";import{b as o,u as r,t as i,c as l,g as c,e as n}from"../starcraft-sdk/starcraft-sdk.b9fffec7.js";import{r as m}from"../index.e8014629.js";import{k as u,c as p,r as v,e as j,A as h,j as d,M as b,u as w,N as g,x as f,O as y,B as T,g as $,C as k}from"../@vue/@vue.f0ed93ab.js";import{_ as x}from"../vue-count-to/vue-count-to.7851cffd.js";import"../img32/img32.2d4b9acf.js";import"../vue-router/vue-router.6a5eb8ba.js";import"../starcraft-core/starcraft-core.a7e8a7b2.js";import"../@ethersproject/@ethersproject.82fce948.js";import"../bn.js/bn.js.022a57fe.js";import"../aes-js/aes-js.52245d71.js";import"../hash.js/hash.js.951de082.js";import"../minimalistic-assert/minimalistic-assert.62310433.js";import"../inherits/inherits.e883a70c.js";import"../bech32/bech32.0c6cc0e9.js";import"../js-sha3/js-sha3.ce966f76.js";import"../ethers/ethers.7357afd8.js";import"../@apollo/@apollo.167459d8.js";import"../tslib/tslib.cdb03bbf.js";import"../optimism/optimism.dbbdffb5.js";import"../@wry/@wry.ac881673.js";import"../ts-invariant/ts-invariant.73996d61.js";import"../graphql/graphql.c449efb6.js";import"../zen-observable-ts/zen-observable-ts.11549e90.js";import"../symbol-observable/symbol-observable.efed2817.js";import"../graphql-tag/graphql-tag.47c56ce3.js";import"../vant/vant.819e26c8.js";import"../@vant/@vant.0d6b19bc.js";import"../vuex-persistedstate/vuex-persistedstate.6394a064.js";import"../axios/axios.a8ee11a1.js";const S={class:"container"},U={class:"container2"},N=["src"],_={class:"tabs_content"},B={class:"tabs"},C=["src"],D=["src"],q=x(u({__name:"BuyNode",setup(u){const{proxy:x}=$(),q=e(),A=p((()=>q.state.walletAccount)),z=v(1),E=v(0),F=v(0),L=v(0),H=v(!0);j((()=>{A.value&&(I(),P())}));const I=async()=>{x.$showLoadingToast({});try{const s=await o().price(1),a=await o().price(2);E.value=x.$utils.utilFormat(r.formatEther(s)),F.value=x.$utils.utilFormat(r.formatEther(a)),x.$closeToast()}catch(s){x.$showFailToast("Error")}},O=async()=>{if(!A.value)return x.$showToast("Please connect wallet");if((1===z.value?E.value:F.value)>L.value)return x.$showToast("Insufficient balance");x.$showLoadingToast({});try{const s=await o().connect(c()).buy(z.value);await s.wait(),x.$showSuccessToast(),setTimeout((()=>{m.push("/NodeReward")}),1e3)}catch(s){x.$closeToast()}},P=async()=>{L.value=await x.$walletUtils.getBalance(i().USDT),H.value=await x.$walletUtils.checkApprove(i().USDT,l().BuyNode,L.value)},M=async()=>{x.$showLoadingToast({});try{const s=await n(i().USDT).connect(c()).approve(l().BuyNode,r.parseUnits(1e10.toString()));await s.wait(),P(),x.$showSuccessToast()}catch(s){x.$closeToast()}},R=s=>{z.value=s};return(e,o)=>{const r=s;return k(),h("section",S,[d(r,{headTitle:"Purchase Node"}),b("div",U,[b("img",{class:"box",src:w(a),alt:""},null,8,N),b("div",_,[b("div",B,[b("div",{class:g({active:1==z.value}),onClick:o[0]||(o[0]=s=>R(1))},[f(" Basic node "),2==z.value?(k(),h("img",{key:0,class:"img1",src:w(t),alt:""},null,8,C)):y("",!0)],2),b("div",{class:g({active:2==z.value}),onClick:o[1]||(o[1]=s=>R(2))},[f(" Super node "),1==z.value?(k(),h("img",{key:0,class:"img2",src:w(t),alt:""},null,8,D)):y("",!0)],2)]),H.value?(k(),h("button",{key:0,class:"btn",onClick:O},T(1==z.value?E.value:F.value)+" USDT for 1 Node ",1)):(k(),h("button",{key:1,class:"btn",onClick:M},"Approve USDT"))])])])}}}),[["__scopeId","data-v-c39ce478"]]);export{q as default};
