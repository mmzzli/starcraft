import{_ as t}from"../HeaderTitle/HeaderTitle.41d7b1f9.js";import{k as s,c as a,r as e,e as i,A as o,j as r,M as n,u as l,F as u,s as c,S as m,O as v,g as p,C as j}from"../@vue/@vue.f0ed93ab.js";import{i as h}from"../img26/img26.1f52bc28.js";import{u as b,a as d}from"../vue-router/vue-router.6a5eb8ba.js";import{u as f}from"../vuex/vuex.adf06551.js";import{i as y,g as w}from"../starcraft-sdk/starcraft-sdk.b9fffec7.js";import{_ as g}from"../vue-count-to/vue-count-to.7851cffd.js";import"../img32/img32.2d4b9acf.js";import"../starcraft-core/starcraft-core.a7e8a7b2.js";import"../@ethersproject/@ethersproject.82fce948.js";import"../bn.js/bn.js.022a57fe.js";import"../aes-js/aes-js.52245d71.js";import"../hash.js/hash.js.951de082.js";import"../minimalistic-assert/minimalistic-assert.62310433.js";import"../inherits/inherits.e883a70c.js";import"../bech32/bech32.0c6cc0e9.js";import"../js-sha3/js-sha3.ce966f76.js";import"../ethers/ethers.7357afd8.js";import"../@apollo/@apollo.167459d8.js";import"../tslib/tslib.cdb03bbf.js";import"../optimism/optimism.dbbdffb5.js";import"../@wry/@wry.ac881673.js";import"../ts-invariant/ts-invariant.73996d61.js";import"../graphql/graphql.c449efb6.js";import"../zen-observable-ts/zen-observable-ts.11549e90.js";import"../symbol-observable/symbol-observable.efed2817.js";import"../graphql-tag/graphql-tag.47c56ce3.js";const C={class:"container"},I={class:"container2"},T=["src"],k=g(s({__name:"Invite",setup(s){const{proxy:g}=p(),k=f(),$=b(),q=d(),x=a((()=>k.state.walletAccount)),_=e(""),S=a((()=>k.state.inviteCode)),z=e(""),A=e("");i((()=>{q.query.inviteCode&&k.commit("setInviteCode",q.query.inviteCode),A.value=S.value,x.value&&(D(),z.value=window.location.origin+"/#/Invite?inviteCode="+x.value)}));const D=async()=>{try{const t=await y().userInviter(x.value);"0x0000000000000000000000000000000000000000"!==t&&(_.value=t)}catch(t){g.$showFailToast("Error")}},E=async()=>{if(!A.value)return g.$showToast("Please fill out");if(A.value==x.value)return g.$showToast("Can't bind itself");const t=await y().userInviter(A.value);if(x.value==t)return g.$showToast("Can't bind itself");g.$showLoadingToast({});try{const t=await y().connect(w()).bindInviter(A.value);await t.wait(),g.$showSuccessToast(),D()}catch(s){g.$closeToast()}},F=()=>{z.value&&g.$utils.handleCopy(z.value)},H=()=>{$.push("/InviteDetails")};return(s,a)=>{const e=t;return j(),o("section",C,[r(e,{headTitle:"Invitation Relationship"}),n("div",I,[n("img",{class:"banner",src:l(h),alt:""},null,8,T),_.value?v("",!0):(j(),o(u,{key:0},[c(n("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>A.value=t),placeholder:"Enter the address of your inviter â€¦"},null,512),[[m,A.value]]),n("button",{class:"btn1",onClick:E},"Bind inviter")],64)),n("button",{class:"btn1",onClick:F},"Copy your invitation link"),n("button",{class:"btn2",onClick:H},"Invite Details")])])}}}),[["__scopeId","data-v-8e9b2556"]]);export{k as default};
